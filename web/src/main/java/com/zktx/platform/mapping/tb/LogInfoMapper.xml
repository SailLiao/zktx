<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zktx.platform.dao.tb.LogInfoMapper">

	<insert id="insertLogInfo" parameterType="com.zktx.platform.entity.tb.logInfo" >
		insert into tb_log_info
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="user_name!=null">
				user_name,
			</if>
			<if test="message!=null">
				message,
			</if>
			<if test="ip_address!=null">
				ip_address,
			</if>
			<if test="log_level!=null">
				log_level,
			</if>
			<if test="create_time!=null">
				create_time,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="user_name!=null">
				#{user_name,jdbcType=VARCHAR},
			</if>
			<if test="message!=null">
				#{message,jdbcType=VARCHAR},
			</if>
			<if test="ip_address!=null">
				#{ip_address,jdbcType=VARCHAR},
			</if>
			<if test="log_level!=null">
				#{log_level,jdbcType=VARCHAR},
			</if>
			<if test="create_time!=null">
				#{create_time,jdbcType=TIMESTAMP}
			</if>
		</trim>
	</insert>
	<select id="queryList" resultType="com.zktx.platform.entity.tb.logInfo">
		select * from tb_log_info 
		<where>
			1=1
			<if test="user_name!=null">
				and user_name like CONCAT('%',#{user_name,jdbcType=VARCHAR},'%')
			</if>
			<if test="create_time_from != null and create_time_from != '' ">
     		<![CDATA[and create_time >= #{create_time_from}]]>
			</if>
			<if test="create_time_to != null and create_time_to != '' ">
     		<![CDATA[and create_time <= #{create_time_to}]]>
			</if>
		</where>
		order by id desc
  		<if test="offset!=null and limit!=null">
  		limit #{offset,jdbcType=INTEGER} , #{limit,jdbcType=INTEGER}
  		</if>
	</select>
	<select id="queryCount" resultType="java.lang.Integer">
		select count(*) from tb_log_info
		<where>
			1=1
			<if test="user_name!=null and user_name!=''">
				and user_name like CONCAT('%',#{user_name,jdbcType=VARCHAR},'%')
			</if>
			<if test="create_time_from != null and create_time_from != '' ">
     		<![CDATA[and create_time >= #{create_time_from}]]>
			</if>
			<if test="create_time_to != null and create_time_to != '' ">
     		<![CDATA[and create_time <= #{create_time_to}]]>
			</if>
		</where>
	</select>

</mapper>